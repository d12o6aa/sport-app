{% extends "shared/athlete_base.html" %}
{% block content %}
<div class="container mt-4">
  <h4>My Plans</h4>
  <div id="myPlans"></div>
    <div class="row g-4">
      <div class="col-md-6 col-lg-4">
        <!-- ŸÉÿßÿ±ÿ™ 1 -->
        <div class="card shadow-sm border-0 h-100">
          <div class="card-header bg-primary text-white">
            <h5 class="mb-0">üèãÔ∏è Strength Training Plan</h5>
          </div>
          <div class="card-body">
            <p class="text-muted small mb-1">
              Assigned at: <strong>2025-08-10</strong>
            </p>
            <p>
              This plan focuses on building core strength and endurance with a mix of cardio and resistance workouts.
            </p>
            <h6 class="fw-bold">Workouts:</h6>
            <ul class="list-group list-group-flush mb-3">
              <li class="list-group-item d-flex justify-content-between align-items-center">
                Warm-up & Stretching
                <span class="badge bg-info rounded-pill">10 min</span>
              </li>
              <li class="list-group-item d-flex justify-content-between align-items-center">
                Full Body Workout
                <span class="badge bg-info rounded-pill">30 min</span>
              </li>
              <li class="list-group-item d-flex justify-content-between align-items-center">
                Cool Down
                <span class="badge bg-info rounded-pill">5 min</span>
              </li>
            </ul>
            <span class="badge bg-success w-100 py-2">Assigned</span>
          </div>
      </div>
  </div>
</div>


</div>
{% endblock %}

{% block scripts %}
<script>
async function loadMyPlans(){
  const res = await fetch('/training/my-plans', { headers: { Authorization: 'Bearer ' + localStorage.getItem('access_token') }});
  if (!res.ok) { document.getElementById('myPlans').innerText = 'No plans or unauthorized'; return; }
  const arr = await res.json();
  const out = document.getElementById('myPlans');
  out.innerHTML = '';
  arr.forEach(a=>{
    const card = document.createElement('div');
    card.className = 'card mb-2';
    card.innerHTML = `<div class="card-body">
      <h5>${a.plan.title}</h5>
      <p>${a.plan.description || ''}</p>
      <ul>${a.plan.workouts.map(w => `<li>${w.title} (${w.duration_minutes || '-' } min)</li>`).join('')}</ul>
    </div>`;
    out.appendChild(card);
  });
}
window.onload = loadMyPlans;
</script>
{% endblock %}
