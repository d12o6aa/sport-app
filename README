ğŸ‹ï¸ Sports Platform Backend

A production-ready backend system for managing athletes, coaches, subscriptions, workouts, and real-time interactions.
Built with Flask, PostgreSQL, JWT authentication, and Socket.IO.

ğŸš€ Features

Role-based system (Admin / Coach / Athlete)

Secure authentication using JWT (httpOnly cookies)

CSRF protection

File uploads (profiles, workouts)

Subscriptions & payments integration

Real-time features using Socket.IO

Database migrations with Flask-Migrate

Production-ready configuration (Dev / Prod / Test)

ğŸ›  Tech Stack

Python 3.10+

Flask

Flask-JWT-Extended

Flask-SQLAlchemy

Flask-Migrate

Flask-Marshmallow

Flask-SocketIO (eventlet)

PostgreSQL

Gunicorn (Production)

ğŸ“ Project Structure
project/
â”‚
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ routes/
â”‚   â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ schemas/
â”‚   â”œâ”€â”€ templates/
â”‚   â”œâ”€â”€ static/
â”‚   â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ config.py
â”‚   â””â”€â”€ __init__.py
â”‚
â”œâ”€â”€ migrations/
â”œâ”€â”€ static/
â”œâ”€â”€ uploads/
â”‚
â”œâ”€â”€ run.py
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ .env.example
â””â”€â”€ README.md

âš™ï¸ Environment Configuration
1ï¸âƒ£ Create .env file

Copy the example file:

cp .env.example .env

2ï¸âƒ£ Required Environment Variables
# Flask
FLASK_ENV=production
SECRET_KEY=your-secret-key

# Database
DATABASE_URL=postgresql://user:password@host:5432/dbname

# JWT
JWT_SECRET_KEY=your-jwt-secret-key

# Base URL
APP_BASE_URL=https://yourdomain.com

# Payment Gateways (Optional)
PAYMOB_API_KEY=
PAYMOB_INTEGRATION_ID_CARD=
PAYMOB_IFRAME_ID=
PAYMOB_HMAC_SECRET=

PAYPAL_CLIENT_ID=
PAYPAL_SECRET=
PAYPAL_MODE=live


âš ï¸ Never commit .env to version control

ğŸ—„ Database Setup
Apply migrations
flask db upgrade


All database tables are created using migrations
db.create_all() is not used in production.

ğŸ‘¤ Admin / First User Setup

The project does not create default users automatically.

Recommended options:

Create the first admin manually from the database

Or provide a secure internal script (not included in delivery)

This is intentional for security reasons.

â–¶ï¸ Running the Application
Development
export FLASK_ENV=development
python run.py

Production (recommended)
gunicorn -k eventlet -w 1 run:app

ğŸ” Security Notes

JWT stored in httpOnly cookies

CSRF protection enabled

HTTPS required in production

No secrets are hardcoded

Role-based access control enforced

File upload size & extensions restricted

ğŸŒ CORS Configuration

CORS origins are configurable via environment variables or config file.

Example:

CORS_ORIGINS = [
  "https://your-frontend-domain.com"
]

ğŸ”” Webhooks
Paymob
POST /athlete/webhook/paymob

PayPal
POST /athlete/webhook/paypal

ğŸ§ª Testing
export FLASK_ENV=testing
pytest


Testing uses an in-memory SQLite database.

ğŸ“¦ Deployment Checklist

 Set all environment variables

 Enable HTTPS

 Run database migrations

 Configure payment webhooks

 Use Gunicorn / Supervisor

 Disable debug mode

ğŸ“„ License

This project is delivered as a custom software solution.
Redistribution or reuse requires written permission.

ğŸ¤ Support

For setup or deployment questions, please contact the project maintainer.